/**
 * Created by Administrator on 2016/11/16.
 *
 */var sdw,OS={},u=navigator.userAgent;OS.onIOS=!!u.match(/\(i[^;]+;(U;)? CPU.+Mac OS X/);OS.onMobile=!!u.match(/AppleWebKit.*Mobile.*/);OS.onIPhone=-1<u.indexOf("iPhone");OS.onIPad=-1<u.indexOf("iPad");OS.onAndriod=-1<u.indexOf("Android")||-1<u.indexOf("Adr");OS.onWP=-1<u.indexOf("Windows Phone");OS.onQQBrowser=-1<u.indexOf("QQBrowser");OS.onMQQBrowser=-1<u.indexOf("MQQBrowser");OS.onWeiXin=-1<u.indexOf("MicroMessenger");OS.onWeiBo=-1<u.indexOf("Weibo");OS.onSafari=-1<u.indexOf("Safari");OS.onQQ=OS.onIOS?-1<u.indexOf("QQ"):OS.onMQQBrowser&&!OS.onWeiXin;OS.onPC=!OS.onMobile;OS.onKD=/KDM3G/.test(u)||/KDM3GNEW/.test(u)||"undefined"!=typeof kdjs||"undefined"!=typeof callKDMSGToResponse;OS.width=document.documentElement.clientWidth||document.body.clientWidth;OS.height=document.documentElement.clientHeight||document.body.clientHeight;OS.onShandw=/Shandw/.test(navigator.userAgent);OS.onAPPs=OS.onMobile&&(OS.onWeiXin||OS.onQQ||OS.onKD||OS.onShandw||OS.onWeiBo);OS.ky=window!==parent;OS.onMicroSDWAPP=/Micro-SDW-APP/.test(u)||/Micro-SDW-APP-WapPay/.test(u);OS.onShandwMicroGame=/Shandw-Micro-Game/.test(u);OS.hasIOSMicroWapPay=/Micro-SDW-APP-WapPay/.test(u);OS.os=0;OS.onIOS?OS.os=OS.onShandw||OS.onMicroSDWAPP||OS.hasIOSMicroWapPay?2:4:OS.onAndriod&&(OS.os=OS.onShandw||OS.onMicroSDWAPP||OS.onShandwMicroGame?1:3);OS.getNow=function(){return+new Date};var APP=OS;APP.onKD&&APP.onAndriod&&(APP.and_KdVer=parseInt(kdjs.getKDVersion().replace(/\D/g,"")));window.NativeBridge={myData:"cbd",name:"sdwJs-cp.js",loadJs:1,callbacksCount:1,callbacks:{goBackstage:null,recoverBackstage:null,pullDownRefresh:function(){}},resultForCallback:function(a,b){var d=window.NativeBridge.callbacks[a];d?d(b):setTimeout(function(){},10)},objectToString:function(a){var b={},d;for(d in a)b[d]="function"==typeof a[d]?a[d].toString():a[d];return JSON.stringify(b)},call:function(a,b,d,c,l){var n=d&&"function"==typeof d,m=n?window.NativeBridge.callbacksCount++:-1,e=!1;APP.ky&&n&&(c=JSON.stringify({optionStr:this.objectToString(c),fncName:a,callbackId:m,args:b,postSdwData:!0,operate:"createNativeBridgeCallback"}),window.parent.postMessage(c,"*"),e=!0);n&&(sessionStorage["NativeBridge_callbacks"+m]=d.toString(),window.NativeBridge.callbacks[m]=d);e||(d=JSON.stringify({callbackId:m,args:b}),b="","quickPayment"===a?b="payment://":APP.onShandw?b="sdw://":APP.onKD&&(b="kd://"),l&&(b=l+"://"),b+=a+"#"+d,a=document.createElement("IFRAME"),a.src=b,document.documentElement.appendChild(a),a.parentNode.removeChild(a))}};var __sdw__={_shareItems:["QQ","Timeline","AppMessage","Weibo","QZone"],_otherItems:["copyLink","followWeixin","addDesktop","customService"],_toolBarItems:"QQ Timeline AppMessage Weibo QZone copyLink followWeixin addDesktop customService".split(" "),checkShareItem:function(a){for(var b=__sdw__._toolBarItems.slice(0),d=0;d<b.length;d++)if(b[d]==a)return!0;return!1}};window.sdw={th_callback:[],cachePayHandler:null,JsApiTicket:"",debug:1,loadJs:1,pre_callbacks:[],onShandw:/Shandw/.test(navigator.userAgent),customToolBarItems:[],init_load:function(){var a=this,b=document.createElement("script");b.src="";document.getElementsByTagName("head")[0].appendChild(b);b.onload=function(){a.loadJs=1;if(a.pre_callbacks.length)for(var b=0;b<a.pre_callbacks.length;b++){var c=a.pre_callbacks[b];c.cb(c.args)}}},log:function(a){this.debug&&alert(a)},hasSDK:function(){var a="undefined"!==typeof CDLAndroid,b=/WangZuo/.test(navigator.userAgent),d=/KDM3GNEW/.test(navigator.userAgent),c=OS.hasIOSMicroWapPay,b=OS.onIOS&&(OS.onShandw||b||d||c);return a||b},selectImg:function(){var a=document.getElementsByTagName("img");return a?a[0].src:""},createCallback:function(a){var b=this;return function(d){try{var c=JSON.parse(d);0==c.result?a.fail&&a.fail(c):1==c.result?a.success&&a.success(c):2==c.result&&a.cancel&&a.cancel(c)}catch(l){b.log(l)}}},createSDKCallback:function(a){var b=this;return function(d){var c=b.createPayData(a);a.complete&&setTimeout(function(){a.complete(c)},20)}},createPayData:function(a){var b={};b.channel=a.channel;b.appId=a.appId;b.cpOrderId=a.cpOrderId;b.timestamp=a.timestamp;b.accountId=a.accountId;b.amount=a.amount;b.memo=a.memo;return b},checkOptionCallback:function(a){for(var b=!0,d=["success","fail","cancel","complete"],c=0;c<d.length;c++)a[d[c]]&&(b=b&&"function"==typeof a[d[c]]);b||this.log("Function\u7c7b\u578b\u9519\u8bef");return b},checkOptionArguments:function(a,b){for(var d=0;d<b.length;d++)if(!a.hasOwnProperty(b[d]))return{result:0,msg:"\u53c2\u6570"+b[d]+"\u6709\u8bef"};return{result:1}},__sortToolBars:function(a){for(var b={firstLine:[],secondLine:[]},d=0;d<a.length;d++)for(var c=0;c<__sdw__._shareItems.length;c++)if(a[d]==__sdw__._shareItems[c]){b.firstLine.push(a[d]);break}for(d=0;d<a.length;d++)for(c=0;c<__sdw__._otherItems.length;c++)if(a[d]==__sdw__._otherItems[c]){b.secondLine.push(a[d]);break}return b},checkWebJsFile:function(){if("undefined"!=typeof dhpayObj)return!0;this.log("\u8bf7\u68c0\u67e5\u662f\u5426\u5f15\u5165\u652f\u4ed8\u6587\u4ef6");return!1},chooseSDWPay:function(a){if("string"==typeof a)try{a=JSON.parse(a)}catch(q){}a=a||{};var b=this.checkOptionArguments(a,"subject appId gameName accountId amount cpOrderId sign timestamp channel".split(" "));a.paychannel=a.paychannel||"";if(0==b.result)this.log(b.msg);else if(this.checkOptionCallback(a)){var b=window.sdw.getUrlObj(),d=b.plt,c=b.pltpay;if(d&&c&&"undefined"!=typeof window._sdw_3th_pay_fun&&"null"!==d)window._sdw_3th_pay_fun(a);else if("1"!=b.app_review){if(this.hasSDK()){var l=this.createSDKCallback(a);/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.cachePayHandler=function(){if(APP.hasIOSMicroWapPay){var c={postjson:{}},b;for(b in a)"success"!=b&&"fail"!=b&&"cancel"!=b&&"complete"!=b&&"paychannel"!=b&&(c.postjson[b]=a[b]),"complete"==b&&(c.closecallback=this.createSDKCallback(a),c.config={alipay:!0});c.config.method="wap";dhpayObj.payfor(c)}else NativeBridge.call("quickPayment",JSON.stringify(a),l,a)}:this.cachePayHandler=function(){if(APP.onMicroSDWAPP||CDLAndroid.sdkAvaliable&&CDLAndroid.sdkAvaliable()){var c={postjson:{}},b;for(b in a)"success"!=b&&"fail"!=b&&"cancel"!=b&&"complete"!=b&&"paychannel"!=b&&(c.postjson[b]=a[b]),"complete"==b&&(c.closecallback=this.createSDKCallback(a),c.config={alipay:!0});c.config.method="wap";dhpayObj.payfor(c)}else CDLAndroid.quickPayment(JSON.stringify(a));APP.ky||(window.onDHSDKResult=l)}}else{var n={postjson:{},resultpost:!0,config:{alipay:!0,weixin:!0}};n.config.method="web";for(var m in a)if("success"!=m&&"fail"!=m&&"cancel"!=m&&"complete"!=m&&"paychannel"!=m&&(n.postjson[m]=a[m]),"complete"==m&&"function"==typeof a.complete){var e=this.createPayData(a);n.closecallback=function(){a.complete(e)}}n.closecallback||(n.closecallback=function(){});""!=a.paychannel&&(m="weixin"==a.paychannel,n.config.alipay=!m,n.config.weixin=m);APP.onKD&&APP.onAndriod&&402>APP.and_KdVer&&(n.config.alipay=!1);this.cachePayHandler=function(){dhpayObj&&dhpayObj.payfor(n)}}APP.ky?/(?=.*btnName)(?=.*M32GW)^.*$/.test(location.href)?this.cachePayHandler&&this.cachePayHandler():window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"checkVisitorMode"}),"*"):this.cachePayHandler&&this.cachePayHandler()}}},isFun:function(a){return"function"===typeof a},onSetShareOperate:function(a){var b=this.clone(a),d=this;"function"!=typeof b.success&&(b.success=function(){});"function"!=typeof b.cancel&&(b.cancel=function(){});"function"!=typeof b.fail&&(b.fail=function(){});if((a=window.sdw.getUrlObj().plt)&&"null"!=a)window._LOADED_JS?d.isFun(window._onSetShareOperate)&&window._onSetShareOperate(b):window._onSetShareOperateCacheFn=function(){d.isFun(window._onSetShareOperate)&&window._onSetShareOperate(b)};else{a={postSdwData:!0,operate:"setSDWShareInfo"};a.shareInfo=b;if(APP.onWeiXin){var c=__sdw__._shareItems.slice(0);a.source="weixin";if("undefined"==typeof b.target||""==b.target)b.target=c;else{for(var l=b.target,n=[],m=0;m<l.length;m++)-1!=c.indexOf(l[m])&&n.push(l[m]);b.target=n}}else APP.onShandw?d=this:APP.onKD&&(d=this,c=d.clone(b),l=d.createCallback(c),window.NativeBridge.call("onSetShareOperate",c,l));APP.ky?(window.sdw.childSuccessCallback=b.success,window.sdw.childCancelCallback=b.cancel,window.sdw.childFailCallback=b.fail,a=JSON.stringify(a),parent.postMessage(a,"*")):(window.sdw.childSuccessCallback=b.success,window.sdw.childCancelCallback=b.cancel,window.sdw.childFailCallback=b.fail)}},closeSDWPay:function(){this.onShandw||this.hasSDK()||(APP.ky&&APP.onWeiXin?window.parent.postMessage(JSON.stringify({operate:"requestHideQrcode"}),"*"):dhpayObj&&dhpayObj.hidepay())},setLocalStorage:function(a,b){APP.onIOS&&APP.onKD&&APP.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"sdw_setLocalStorage",key:a,data:b}),"*"):localStorage["_SDW_"+a]=JSON.stringify({name:"sdw_data",data:b})},readLocalStorage:function(a,b){if(APP.onIOS&&APP.onKD&&APP.ky)sdw._readLocalStorageCallback=b,window.parent.postMessage(JSON.stringify({postSdwData:!0,key:a,operate:"sdw_getLocalStorage"}),"*");else{var d=localStorage["_SDW_"+a];try{d=JSON.parse(d),b(d.data)}catch(c){b(null)}}},postServerId:function(a){console.log("\u6b64\u65b9\u6cd5\u3010postServerId\u3011\u5df2\u5931\u6548")},postGameInfo:function(a){a=a||{};for(var b="uid appid channel sid level type vip power new".split(" "),d=["id","sname","nick"],c=0;c<b.length;c++)if("undefined"===typeof a[b[c]]){console.log("\u7f3a\u5c11\u5fc5\u586b\u53c2\u6570\u5b57\u6bb5",b[c]);return}for(c=0;c<d.length;c++)"undefined"===typeof a[d[c]]&&(a[d[c]]="");var b=window.sdw.getUrlObj().plt,l=this;b&&"null"!==b&&(window._LOADED_JS?l.isFun(window._getGameUserInfo)&&window._getGameUserInfo(a):l.th_callback.push(function(){l.isFun(window._getGameUserInfo)&&window._getGameUserInfo(a)}));APP.ky&&window.parent.postMessage(JSON.stringify({postSdwData:!0,data:a,operate:"sdw_postGameInfo"}),"*")},clone:function(a){if("object"==typeof a){var b={},d;for(d in a)b[d]=a[d]}return b},getAuthInfo:function(a,b){var d=a.platform,c=a.gid,l="";d&&c&&"null"!==d?(window.sdw._authCallback=b,window.sdw._authParam=window.sdw._authParam||{},window.sdw._authParam.cGid=c,window.sdw._authParam.plt=d,l="https://www.shandw.com/3th/"+d+"/auth.js?m\x3d"+ +new Date,window.sdw.addJsFile(l,function(){console.log("\u52a0\u8f7d\u7b2c\u4e09\u65b9\u7684\u7528\u6237\u6388\u6743js\u6587\u4ef6...")})):alert("[sdw.getAuthInfo]:\u7f3a\u5c11platform\u548cgid\u5b57\u6bb5")},onShowQcode:function(){var a=window.sdw.getUrlObj().plt,b=this;a&&"null"!==a&&(window._LOADED_JS?b.isFun(window._onShowQcode)&&window._onShowQcode():b.th_callback.push(function(){b.isFun(window._onShowQcode)&&window._onShowQcode()}))},onShowShareLayer:function(){var a=window.sdw.getUrlObj().plt,b=this;a&&"null"!==a&&(window._LOADED_JS?b.isFun(window._onShowShareLayer)&&window._onShowShareLayer():b.th_callback.push(function(){b.isFun(window._onShowShareLayer)&&window._onShowShareLayer()}))},getGameUserInfo:function(a,b){console.log("\u6b64\u65b9\u6cd5\u3010getGameUserInfo\u3011\u5df2\u5931\u6548\uff0c\u8bf7\u8c03\u7528\u65b0\u7684\u65b9\u6cd5")},addDesktop:function(){APP.ky?window.parent.postMessage(JSON.stringify({postSdwData:!0,operate:"sdw_addDesktop"}),"*"):console.log("\u53ea\u80fd\u5728IFRAME\u6a21\u5f0f\u4e0b\u8c03\u7528")}};APP.ky&&window.addEventListener("message",function(a){if("string"===typeof a.data)try{var b=JSON.parse(a.data);if(b.postSdwData){var d=b.oprate;"shareCallback_success"==d&&window.sdw.childSuccessCallback&&window.sdw.childSuccessCallback();"shareCallback_cancel"==d&&window.sdw.childFailCallback&&window.sdw.childCancelCallback();"shareCallback_fail"==d&&window.sdw.childFailCallback&&window.sdw.childFailCallback();"choosePayCheckState_ok"==d&&sdw.cachePayHandler&&sdw.cachePayHandler();if("getLocalStorage_ok"==d){var c=b.data;sdw._readLocalStorageCallback&&sdw._readLocalStorageCallback(c)}}}catch(l){console.log(l)}},!1);window.sdw._MD5=function(a){function b(a){for(var b=[],c=0;c<a.length;c++)b=b.concat(l(a[c]));return b}function d(a){for(var b=[],c=0;8>c;c++)b.push(a&255),a>>>=8;return b}function c(a,b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}function l(a){for(var b=[],c=0;c<a.length;c++)if(127>=a.charCodeAt(c))b.push(a.charCodeAt(c));else for(var d=encodeURIComponent(a.charAt(c)).substr(1).split("%"),e=0;e<d.length;e++)b.push(parseInt(d[e],16));return b}function n(a,b,c,d){for(var e="",p,l,f=3;0<=f;f--)l=arguments[f],p=l&255,l>>>=8,p<<=8,p|=l&255,l>>>=8,p<<=8,p|=l&255,l>>>=8,p<<=8,p|=l,p=(p>>>0).toString(16),p="00000000".substr(0,8-p.length)+p,e+=p;return e}function m(a){for(var b=Array(a.length),c=0;c<a.length;c++)b[c]=a[c];return b}var e=null,q=null;"string"==typeof a?e=l(a):a.constructor==Array?0===a.length?e=a:"string"==typeof a[0]?e=b(a):"number"==typeof a[0]?e=a:q=typeof a[0]:"undefined"!=typeof ArrayBuffer?a instanceof ArrayBuffer?e=m(new Uint8Array(a)):a instanceof Uint8Array||a instanceof Int8Array?e=m(a):a instanceof Uint32Array||a instanceof Int32Array||a instanceof Uint16Array||a instanceof Int16Array||a instanceof Float32Array||a instanceof Float64Array?e=m(new Uint8Array(a.buffer)):q=typeof a:q=typeof a;q&&alert("MD5 type mismatch, cannot process "+q);return function(){function a(a,b,c,d){var e=g;g=h;var k=h=f;a=4294967295&t+(4294967295&a+(4294967295&b+c));f=4294967295&k+(a<<d&4294967295|a>>>32-d);t=e}var b=e.length;e.push(128);var l=e.length%64;if(56<l){for(var m=0;m<64-l;m++)e.push(0);l=e.length%64}for(m=0;m<56-l;m++)e.push(0);e=e.concat(d(8*b));for(var b=1732584193,l=4023233417,q=2562383102,r=271733878,t=0,f=0,h=0,g=0,m=0;m<e.length/64;m++){var t=b,f=l,h=q,g=r,k=64*m;a(f&h|~f&g,3614090360,c(e,k),7);a(f&h|~f&g,3905402710,c(e,k+4),12);a(f&h|~f&g,606105819,c(e,k+8),17);a(f&h|~f&g,3250441966,c(e,k+12),22);a(f&h|~f&g,4118548399,c(e,k+16),7);a(f&h|~f&g,1200080426,c(e,k+20),12);a(f&h|~f&g,2821735955,c(e,k+24),17);a(f&h|~f&g,4249261313,c(e,k+28),22);a(f&h|~f&g,1770035416,c(e,k+32),7);a(f&h|~f&g,2336552879,c(e,k+36),12);a(f&h|~f&g,4294925233,c(e,k+40),17);a(f&h|~f&g,2304563134,c(e,k+44),22);a(f&h|~f&g,1804603682,c(e,k+48),7);a(f&h|~f&g,4254626195,c(e,k+52),12);a(f&h|~f&g,2792965006,c(e,k+56),17);a(f&h|~f&g,1236535329,c(e,k+60),22);a(g&f|~g&h,4129170786,c(e,k+4),5);a(g&f|~g&h,3225465664,c(e,k+24),9);a(g&f|~g&h,643717713,c(e,k+44),14);a(g&f|~g&h,3921069994,c(e,k),20);a(g&f|~g&h,3593408605,c(e,k+20),5);a(g&f|~g&h,38016083,c(e,k+40),9);a(g&f|~g&h,3634488961,c(e,k+60),14);a(g&f|~g&h,3889429448,c(e,k+16),20);a(g&f|~g&h,568446438,c(e,k+36),5);a(g&f|~g&h,3275163606,c(e,k+56),9);a(g&f|~g&h,4107603335,c(e,k+12),14);a(g&f|~g&h,1163531501,c(e,k+32),20);a(g&f|~g&h,2850285829,c(e,k+52),5);a(g&f|~g&h,4243563512,c(e,k+8),9);a(g&f|~g&h,1735328473,c(e,k+28),14);a(g&f|~g&h,2368359562,c(e,k+48),20);a(f^h^g,4294588738,c(e,k+20),4);a(f^h^g,2272392833,c(e,k+32),11);a(f^h^g,1839030562,c(e,k+44),16);a(f^h^g,4259657740,c(e,k+56),23);a(f^h^g,2763975236,c(e,k+4),4);a(f^h^g,1272893353,c(e,k+16),11);a(f^h^g,4139469664,c(e,k+28),16);a(f^h^g,3200236656,c(e,k+40),23);a(f^h^g,681279174,c(e,k+52),4);a(f^h^g,3936430074,c(e,k),11);a(f^h^g,3572445317,c(e,k+12),16);a(f^h^g,76029189,c(e,k+24),23);a(f^h^g,3654602809,c(e,k+36),4);a(f^h^g,3873151461,c(e,k+48),11);a(f^h^g,530742520,c(e,k+60),16);a(f^h^g,3299628645,c(e,k+8),23);a(h^(f|~g),4096336452,c(e,k),6);a(h^(f|~g),1126891415,c(e,k+28),10);a(h^(f|~g),2878612391,c(e,k+56),15);a(h^(f|~g),4237533241,c(e,k+20),21);a(h^(f|~g),1700485571,c(e,k+48),6);a(h^(f|~g),2399980690,c(e,k+12),10);a(h^(f|~g),4293915773,c(e,k+40),15);a(h^(f|~g),2240044497,c(e,k+4),21);a(h^(f|~g),1873313359,c(e,k+32),6);a(h^(f|~g),4264355552,c(e,k+60),10);a(h^(f|~g),2734768916,c(e,k+24),15);a(h^(f|~g),1309151649,c(e,k+52),21);a(h^(f|~g),4149444226,c(e,k+16),6);a(h^(f|~g),3174756917,c(e,k+44),10);a(h^(f|~g),718787259,c(e,k+8),15);a(h^(f|~g),3951481745,c(e,k+36),21);b=4294967295&b+t;l=4294967295&l+f;q=4294967295&q+h;r=4294967295&r+g}return n(r,q,l,b).toUpperCase()}()};window.sdw.getAjaxData=function(a,b){if(a){var d=function(){var a;if(window.XMLHttpRequest)a=new XMLHttpRequest,a.overrideMimeType&&a.overrideMimeType("text/xml");else if(window.ActiveXObject)for(var b=["MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<b.length;d++)try{a=new ActiveXObject(b[d]);break}catch(m){}return a}();d&&(d.open("GET",a,!0),d.onreadystatechange=function(){if(4==d.readyState&&200==d.status){var a=JSON.parse(d.responseText);b&&b(a)}else console.log("[AJAX ERROR]:",d)},d.send(null))}else console.log("[getAjaxData]: url error")};window.sdw.getUrlObj=function(){for(var a=0<location.search.length?location.search.substring(1):"",b={},a=a.length?a.split("\x26"):[],d,c,l=0;l<a.length;l++)d=a[l].split("\x3d"),c=decodeURIComponent(d[0]),d=decodeURIComponent(d[1]),c.length&&(b[c]=d);return b};window.sdw.addJsFile=function(a,b){var d=document.getElementsByTagName("HEAD").item(0),c=document.createElement("script");c.type="text/javascript";c.src=a;d.appendChild(c);c.onload=b};window.sdw.canSetShare=OS.onKD||OS.onShandw||OS.onWeiXin;window.sdw.canAddDesktop=OS.onKD||OS.onShandw;(function(){var a=window.sdw.getUrlObj(),b=a.plt,a=a.pltpay;b&&a&&"null"!==b&&window.sdw.addJsFile("https://www.shandw.com/3th/"+b+"/pay.js?m\x3d"+ +new Date,function(){window._LOADED_JS=!0;for(var a=0;a<window.sdw.th_callback.length;a++)window.sdw.th_callback[a]()})})();
/*# sourceMappingURL=sdwJs.min.js.map */